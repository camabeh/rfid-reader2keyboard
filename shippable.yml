language: java

jdk:
   - oraclejdk8

cache: true

env:
  secure: Xu6tVOI4uxOGV0hP7qZs8PddJ3Rh9I+ddJHotJP/yAEve0ZZtco0zqTJwTyDGrzYTjht8tjIKicjqvY6hqUuN1fEHoJGPMJSerDEsO+xL4AumwYf+gpOyLuF+OSlj8XZCO1s8OjRXSnrHg1GPu8zWEtylfrizOIl7lIv0oc9BljoUF4jKlqLqouHrBJMszdQRV2BOzVhv12oebbQ0BF0/kRta2oSpxKsiuA66wSRvTaqb5Idz2hpP1HPdk6TQu8J+grq38NLgBGt0n727jpQmPHa/c8p8/Zhvdjm3Lyg69/iBfma1jRYzDOFFjRjzHK7waHRho1OHZnIvrSKpNtfRg==

notifications:
  email: false

before_script:
  - apt-get update && apt-get install jq maven -y
  - if [[ $SHIPPABLE_JDK_VERSION == "oraclejdk8" ]] ; then export JAVA_HOME="/usr/lib/jvm/java-8-oracle"; export PATH="$PATH:/usr/lib/jvm/java-8-oracle/bin"; export java_path="/usr/lib/jvm/java-8-oracle/jre/bin/java"; fi
  - update-alternatives --set java $java_path
  - java -version

script:
   - mvn clean test install

after_success:
  - if [ "$BRANCH" == "master" -a "$PULL_REQUEST" == "false" ] ; then bash ./create-release.sh; fi
